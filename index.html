<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Test of markdown</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css">
  <script src="marked/marked.js"></script>
</head>
<body>
	<div class="span33">
		<div class="textBox">
			<h1>Notes on programming</h1>
			<h2>Written by a musician and chemical engineer</h2>
			<p>Fill in a few paragraphs about what I do and don't</p>
		</div>
		<div class="textBox" id="soonToBeMenu"></div>
	</div>

	<div class="span66">
		<div class="textBox main">
			<noscript>Hey. I'm sorry but I am passing markdown with JS and thus need you to enable it to see this site...</noscript>
			<div id="post"></div>
		</div>
	</div>

	
	<div id="content"></div>
	<script>
		//creating posts from markdown
		var arrayOfPosts = ['mdTest.md', 'like.md', 'SuperCollider.md'];
		var text = "";
		for(i=0; i < arrayOfPosts.length; i++){
			var client = new XMLHttpRequest();
			client.open('get', '/posts/'.concat(arrayOfPosts[i]) , false);
			client.send();
			if(client.status != "404"){
				text = text.concat(client.responseText.concat(" \n "));
			}
		}
		document.getElementById('post').innerHTML = marked(text);
		//getting all headlines
		var allHeadlines = document.getElementsByTagName("h1");
		var headlines = "";
		for(i=0; i < allHeadlines.length; i++){
			var hl = allHeadlines[i]
			if(hl) {
				headlines = headlines + hl.innerHTML + " \n ";
			}
		}
		document.getElementById('soonToBeMenu').innerHTML = headlines;


	</script>
</body>

</html>